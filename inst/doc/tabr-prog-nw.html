<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Noteworthiness</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Noteworthiness</h1>



<p><code>tabr</code> provides a music notation syntax system represented in R code and a collection of music programming functions for generating, manipulating, organizing and analyzing musical information structures in R. While other packages focus on working with acoustic data more generally, <code>tabr</code> provides a framework for creating and working with musical data in a common music notation format. The package offers functions for mapping between pitch and other quantities like frequency and wavelength, but the main purpose is to manipulate musical information in notation form. Music programming in the notation syntax provided by <code>tabr</code> can be used for a variety of purposes, but it also integrates cohesively with the packageâ€™s transcription functions.</p>
<div id="noteworthy-strings" class="section level2">
<h2>Noteworthy strings</h2>
<p>Before exploring many of the music programming functions in the package, it is worth introducing an important concept that is expressed throughout <code>tabr</code>: noteworthiness. Prior to construction of <code>phrase</code> class objects that can be passed to LilyPond for sheet music engraving, you start out with simple character strings. These strings contain letters representing musical notes, and possibly some other characters that indicate such things as sharps and flats, octave number, and rests.</p>
<p>There are a number of requirements strings must meet to have valid <code>tabr</code> music notation syntax that can be transformed meaningfully and unambiguously into LilyPond syntax. A string is considered <em>noteworthy</em> if it meets all of these requirements that differentiate it from arbitrary character strings.</p>
<p>It is important to be familiar with the requirements of a noteworthy string so that you can construct them properly. There is also the <code>noteworthy</code> class object built upon strings that have valid music notation syntax.</p>
<div id="checking-noteworthiness" class="section level3">
<h3>Checking noteworthiness</h3>
<p>A string can be checked directly with <code>noteworthy</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">x &lt;-<span class="st"> &quot;a, r b,*2 ce_g cd#g&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">noteworthy</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">noteworthy</span>(<span class="st">&quot;h&quot;</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE
</code></pre>
<p>This reports whether the entire string conforms to all requirements for it to be valid <code>noteworthy</code> syntax.</p>
</div>
<div id="the-noteworthy-class" class="section level3">
<h3>The <code>noteworthy</code> class</h3>
<p>Functions in <code>tabr</code> that take noteworthy strings as input perform internal checks of noteworthiness for you and will throw an error if you provide an unworthy string. These checks are skipped if the input already has the <code>noteworthy</code> class. If a function returns a noteworthy string, the class will also be <code>noteworthy</code>.</p>
<p>It is important to understand that the notion of noteworthy strings is implemented throughout <code>tabr</code>. One purpose is thorough and strict input validation. This leads to more robust function behavior and consistent user programming experience by rejecting problematic string input early.</p>
<p><code>as_noteworthy</code> can be used to coerce to the <code>noteworthy</code> class. Coercion will fail if the string is not noteworthy. The class offers its own <code>print</code> and <code>summary</code> methods for noteworthy strings as well as a number of other generic method implementations. While some functions are intended to aggressively interpret a character string as noteworthy, performing the check and coercion directly, many functions in the package require an explicit <code>noteworthy</code> object. This is especially true of any generics, which dispatch methods based on the class of the input object.</p>
<p>Functions like <code>as_noteworthy</code> have the added benefit of conforming all notes to the same formatting. This will clean up any presence of combined flats and sharps and combined tick and integer octave numbering.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">x &lt;-<span class="st"> &quot;a# b_*2 c, d&#39;&#39; e3*2 g_4 c2e_2g2*2&quot;</span></a>
<a class="sourceLine" id="cb3-2" title="2">x &lt;-<span class="st"> </span><span class="kw">as_noteworthy</span>(x)</a>
<a class="sourceLine" id="cb3-3" title="3">x</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">summary</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Timesteps: </span><span>10 (8 notes, 2 chords)</span><span style="color: #555555;font-weight: bold;">
#&gt;   Octaves: </span><span>tick</span><span style="color: #555555;font-weight: bold;">
#&gt;   Accidentals: </span><span>flat</span><span style="color: #555555;font-weight: bold;">
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<p>When coercing a noteworthy character string to one that has the <code>noteworthy</code> class, formatting is inferred from the <code>notes</code> input. Precedence is given to ticks for octave numbering and flats for accidentals. You can specify formatting attributes by providing explicit arguments. This is useful for coercing to another format.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">x &lt;-<span class="st"> </span><span class="kw">as_noteworthy</span>(x, <span class="dt">format =</span> <span class="st">&quot;vector&quot;</span>, <span class="dt">octaves =</span> <span class="st">&quot;tick&quot;</span>, <span class="dt">accidentals =</span> <span class="st">&quot;flat&quot;</span>)</a>
<a class="sourceLine" id="cb5-2" title="2">x</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>vectorized time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">summary</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Timesteps: </span><span>10 (8 notes, 2 chords)</span><span style="color: #555555;font-weight: bold;">
#&gt;   Octaves: </span><span>tick</span><span style="color: #555555;font-weight: bold;">
#&gt;   Accidentals: </span><span>flat</span><span style="color: #555555;font-weight: bold;">
#&gt;   Format: </span><span>vectorized time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">,</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<p>Some functions like <code>transpose</code> also expose these formatting arguments directly. For other functions, format is strictly inferred from the input notes, but you can always coerce to another format with <code>as_noteworthy</code>.</p>
<p>As an aside, tick octave notation is not the default just because it is used by LilyPond. The vignettes on transcription show that conversion from integers to ticks for the <code>phrase</code> objects used in transcription is automatic. Another reason to use the tick format regardless is that it is more robust. In <code>tabr</code>, integer octaves cannot go below zero without leading to problematic syntax, but you can always add more commas as octaves decrease. An even more critical reason is that the <code>music</code> class, which assembles a <code>noteworthy</code> class object and a <code>noteinfo</code> class object together, strictly uses tick format for octave numbering because numbers are needed to unambiguously describe time juxtaposed with octave numbering.</p>
</div>
<div id="stricter-note-and-chord-validation" class="section level3">
<h3>Stricter note and chord validation</h3>
<p><code>noteworthy</code> is built upon the more specific, vectorized functions <code>is_note</code> and <code>is_chord</code>, which provide more detailed information on the space-delimited entries in a string. <code>is_note</code> and <code>is_chord</code> return a logical vector reporting whether each entry contains a valid note or valid chord representation, respectively.</p>
<p>Notice how the vectorized results account for the expansion operator in <code>b2*2</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">x &lt;-<span class="st"> &quot;a2 r b2*2 ce_g cd#g HELLO_WORLD&quot;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">is_note</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE
</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">is_chord</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE
</code></pre>
<p>Functions like these serve simple purposes that you are unlikely to use them when writing sheet music. However, they can be highly useful in music data analysis, particularly when building more complex musical manipulations on top of simpler functions.</p>
</div>
</div>
<div id="notable-phrases" class="section level2">
<h2>Notable phrases</h2>
<p>Before moving on, briefly consider the quasi-counterpart to noteworthy strings: notable phrases. If you have used <code>tabr</code>, you are familiar with turning strings into phrases, assembling these phrases into tracks and scores, and sending them on to LilyPond to create sheet music. In this context, you might think of phrase objects as the fundamental unit of musical information and the strings from which you create them seem more like raw data.</p>
<p><code>tabr</code> offers some ability to reverse direction and decompose phrases back into their component parts: <code>notes</code>, <code>info</code> and <code>string</code> character strings. This is done using <code>notify</code>, which returns a tibble data frame.</p>
<p>For complex phrases, this can be challenging. There should be no expectation of true one to one functional transformation. For example, <code>notify</code> is not complex enough to handle unfolding repeat sections or text notations attached to notes inside phrases. Certainly, this will not work for LilyPond syntax that was originally created in LilyPond rather than with <code>tabr</code> because <code>tabr</code> only provides access to a tiny fraction of what LilyPond can do. But in many simpler cases, you can successfully invert a phrase previously created from strings in R. Such a phrase is considered <em>notable</em>.</p>
<p><code>phrasey</code> can be used to check if a string at least loosely resembles the content of a valid phrase object. Additional related functions are shown below, which takes a phrase through a complete cycle of deconstruction and reconstruction.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">p1 &lt;-<span class="st"> </span><span class="kw">phrase</span>(<span class="st">&quot;b, c d ec&#39;g&#39;~ ec&#39;g&#39;&quot;</span>, <span class="st">&quot;4( 4)- 2*3&quot;</span>, <span class="st">&quot;5*3 432*2&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">p1</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;">&lt;</span><span style="color: #555555;font-weight: bold;">Musical phrase</span><span style="color: #555555;">&gt;</span><span>
#&gt; </span><span style="color: #555555;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">,</span><span style="color: #BB0000;">\5</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">4(</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #BB0000;">\5</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">4)\glissando</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #BB0000;">\5</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">2</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #BBBB00;">~</span><span style="color: #BB0000;">\4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">~</span><span style="color: #BB0000;">\3</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">~</span><span style="color: #BB0000;">\2</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">2</span><span style="color: #555555;"> &lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #BB0000;">\4</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BB0000;">\3</span><span style="color: #555555;"> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BB0000;">\2</span><span style="color: #555555;">&gt;</span><span style="color: #BBBB00;">2</span><span>
</span></code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"></a>
<a class="sourceLine" id="cb10-2" title="2">x &lt;-<span class="st"> </span><span class="kw">as.character</span>(p1)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">phrasey</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">identical</span>(<span class="kw">as_phrase</span>(x), p1)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">notable</span>(p1) <span class="co"># safe logical check</span></a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">notify</span>(p1)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;"># A tibble: 5 x 3</span><span>
#&gt;   notes    info  string
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span> 
#&gt; </span><span style="color: #555555;">1</span><span> b,       4(    5     
#&gt; </span><span style="color: #555555;">2</span><span> c        4)-   5     
#&gt; </span><span style="color: #555555;">3</span><span> d        2     5     
#&gt; </span><span style="color: #555555;">4</span><span> e~c&#39;~g&#39;~ 2     432   
#&gt; </span><span style="color: #555555;">5</span><span> ec&#39;g&#39;    2     432
</span></code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"></a>
<a class="sourceLine" id="cb14-2" title="2">p2 &lt;-<span class="st"> </span><span class="kw">p</span>(<span class="kw">phrase_notes</span>(p1), <span class="kw">phrase_info</span>(p1), <span class="kw">phrase_strings</span>(p1))</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">identical</span>(p1, p2)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<p>With an understanding noteworthy strings, the next section covers a number of functions related to programming around musical scales.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
