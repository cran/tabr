<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Note functions</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Note functions</h1>



<div id="note-identity-checks" class="section level2">
<h2>Note identity checks</h2>
<p>There are a number of functions that assist with music programming around note and pitch validation, comparison, equivalence checking, and various manipulations and transformations. In a previous section, you saw <code>is_note</code> and <code>is_chord</code>. Other identity functions include:</p>
<ul>
<li>note_is_natural</li>
<li>note_is_accidental</li>
<li>note_is_flat</li>
<li>note_is_sharp</li>
<li>is_diatonic</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">x &lt;-<span class="st"> &quot;c e_ g b_&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">note_is_natural</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE  TRUE FALSE
</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">note_is_accidental</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">note_is_flat</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">note_is_sharp</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE FALSE FALSE FALSE
</code></pre>
<p>These <code>note_is_*</code> functions strictly accept notes. There is also <code>is_diatonic</code>, which less strictly requires any noteworthy string. It can be applied to notes and chords alike. Given the name, it is slightly less basic than the prior functions. It takes a <code>key</code> signature for context.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">x &lt;-<span class="st"> &quot;c e_ g b_ cd#g&quot;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">is_diatonic</span>(x, <span class="st">&quot;c&quot;</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE  TRUE FALSE FALSE
</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">is_diatonic</span>(x, <span class="st">&quot;b_&quot;</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE
</code></pre>
</div>
<div id="coercion-of-accidentals" class="section level2">
<h2>Coercion of accidentals</h2>
<p>Note that it is common for functions like this to treat notes as different if they sound the same but one is transcribed as a flat and the other as a sharp. <code>tabr</code> does focus on transcription and this is an important distinction to make wherever necessary. Other functions such as <code>transpose</code> of course handle pitch as pitch and therefore the style of representation does not affect computation.</p>
<p>There are functions for enforcing a singular representation for accidentals in noteworthy strings since it is unusual to mix flats and sharps.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">flatten_sharp</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ce_g</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">sharpen_flat</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d#</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a#</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">cd#g</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<p>Do not be confused about the names of these functions. They are for enforcing a single type of accidental. To actually lower sharps by a half step or semitone as well as raise flats similarly, use <code>naturalize</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">naturalize</span>(x)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">cdg</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<p>These are helpful building blocks for music programming. A useful wrapper around <code>flatten_sharp</code> and <code>sharpen_flat</code> is <code>note_set_key</code>. Like <code>is_diatonic</code>, this function takes a <code>key</code> argument. Providing a key signature is often used in <code>tabr</code> functions for the purpose of enforcing the correct representation of accidentals intended by the user, which <code>tabr</code> cannot know until informed.</p>
<p>Be aware that the default for functions that take a <code>key</code> argument is <code>c</code>, but <code>c</code> and <code>am</code> have no accidentals in their key signatures, so <code>note_set_key</code> will have no effect if you pass these values to <code>key</code>. It is also important to recognize that it does not matter for this function what key you choose specifically; it only matters that you choose a key that has the type of accidentals in its signature that you wish to force your noteworthy string to use. If you want flats, it makes no difference if you set <code>key = &quot;f&quot;</code> or <code>key = &quot;b_&quot;</code>. For this function, you can also literally enter <code>key = &quot;flat&quot;</code> or <code>key = &quot;sharp&quot;</code>, options that stress the extent to which <code>key</code> actually matters to <code>note_set_key</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">note_set_key</span>(x, <span class="st">&quot;c&quot;</span>) <span class="co"># no change possible</span></a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">cd#g</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">note_set_key</span>(x, <span class="st">&quot;f&quot;</span>) <span class="co"># key of F has a flat</span></a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ce_g</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">note_set_key</span>(x, <span class="st">&quot;g&quot;</span>) <span class="co"># key of G has a sharp</span></a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d#</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a#</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">cd#g</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<p>The intent is not to force notes which may not be diatonic to the key signature to fit that signature. All pitches remain exactly what they are. It does not matter if they are not in the key. But they are forced to conform to a key’s representation of accidentals.</p>
<p>Of course, for many other functions in <code>tabr</code>, <code>key</code> arguments utilize the specific key signature in a more complete manner, and the options <code>flat</code> and <code>sharp</code> are not relevant or allowed.</p>
</div>
<div id="comparative-equivalence" class="section level2">
<h2>Comparative equivalence</h2>
<p>The <code>note_is_*</code> functions mentioned earlier are vectorized, but the operations they perform are self checks. Other functions are available for comparative checks of identity or equivalence between two notes. These functions are also vectorized. Each note input can be an entire noteworthy string.</p>
<p>There are different dimensions along which the strictness of equality varies and are worth taking a moment to break these and other properties down clearly:</p>
<ul>
<li>These functions come in <code>*_is_equal</code> and <code>*is_identical</code> pairs. Equality is more relaxed than identity.</li>
<li>The <code>note_is_*</code> pairs below also offer the argument <code>ignore_octave</code>. This further weakens the requirements for passing both equality and identity comparisons of two notes.</li>
<li>These functions perform a noteworthy check, but do not require anything stricter. This means these comparisons work on all notes, even those belonging to chords.</li>
<li>The general distinction between notes being equal and notes being identical is sound vs. transcription/written notation. If two notes sound the same, e.g. <code>e_</code> and <code>d#</code>, they are equal, but not identical.</li>
<li>There are additional nuances with octave comparisons using the <code>octave_is_*</code> pairs.</li>
</ul>
<p>First look at note and pitch comparisons. The main difference is that pitch is more complete than note in that the former implicitly carries the octave position. Setting <code>ignore_octave = FALSE</code> for note comparisons makes them equivalent to their pitch comparison counterparts.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">x &lt;-<span class="st"> &quot;b_2 ce_g&quot;</span></a>
<a class="sourceLine" id="cb13-2" title="2">y &lt;-<span class="st"> &quot;b_ cd#g&quot;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">note_is_equal</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE TRUE
</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">note_is_identical</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE
</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">pitch_is_equal</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">pitch_is_identical</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE FALSE
</code></pre>
<p>There are minimal requirements for equivalence that precede the forms and degrees of equivalence described and shown above. At a bare minimum, two noteworthy strings must have the same number of time steps available for pairwise comparison. Otherwise a simple <code>NA</code> is returned. In the following example, the strings <code>x</code> and <code>y</code> have the same number of notes, in the same order, but the first has three times steps and the second has two.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">x &lt;-<span class="st"> &quot;b_2 ce_g b_&quot;</span></a>
<a class="sourceLine" id="cb17-2" title="2">y &lt;-<span class="st"> &quot;b_2 ce_gb_&quot;</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">note_is_equal</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA
</code></pre>
<p>In the next example, <code>x</code> and <code>y</code> have the same number of of the same notes, again in the same order, and even have an equal number of timesteps. Having the same number of timesteps makes pairwise comparisons possible. They return <code>FALSE</code> where unequal.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">x &lt;-<span class="st"> &quot;b_2 ce_g b_&quot;</span></a>
<a class="sourceLine" id="cb18-2" title="2">y &lt;-<span class="st"> &quot;b_2 ce_ gb_&quot;</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="kw">note_is_equal</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE FALSE
</code></pre>
<p>Finally, there are octave comparisons, which must be defined and behave somewhat differently. <code>octave_is_equal</code> and <code>octave_is_identical</code> allow much weaker forms of equivalence in that they ignore notes completely. These functions are only concerned with comparing the octave numbers spanned by any pitches present at each timestep.</p>
<p>When checking for equality, <code>octave_is_equal</code> only looks at the octave number associated with the first note at each step, e.g., only the root note of a chord. <code>octave_is_identical</code> compares all octaves spanned at a given timestep by considering all notes when a chord is present.</p>
<p>This still leaves open the definitions of equivalence. To clarify:</p>
<ul>
<li>It does not matter when comparing two chords that they may be comprised of a different numbers of notes.</li>
<li>If the set of unique octaves spanned by one chord is identical to the set spanned by the other, they are considered to have identical octave coverage.</li>
</ul>
<p>Consider an example: <code>a1b2c3</code> is identical to <code>d1e1f2g3</code>. The notes are irrelevant. The number of notes is irrelevant. The fact that octave number one occurs a different number of times in each chord is irrelevant. What matters is that they both have the same set of unique octave positions <code>{1, 2, 3}</code>. To be equal, even less is required. In this case it only matters that the two chords begin with <code>x1</code>, where <code>x</code> is any note.</p>
<p>One alternative, for <code>octave_is_identical</code> only, is to set <code>single_octave = TRUE</code>. This increases the requirement for identity to require that all notes from both chords being compared at a given timestep share a single octave.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">x &lt;-<span class="st"> &quot;a1 b_2 a1b2c3 a1b4 g1a1b1&quot;</span></a>
<a class="sourceLine" id="cb19-2" title="2">y &lt;-<span class="st"> &quot;a_2 g#2 d1e1f2g3 a1b2b4 d1e1&quot;</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">octave_is_equal</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">octave_is_identical</span>(x, y)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">octave_is_identical</span>(x, y, <span class="dt">single_octave =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE FALSE  TRUE
</code></pre>
</div>
<div id="rotate-shift-arpeggiate" class="section level2">
<h2>Rotate, shift, arpeggiate</h2>
<p>Rotating or cycling a sequence of notes and chords in a noteworthy string is done with <code>note_rotate</code>. This is a simple function. It only rotates the sequence left or right. It does not do any transposition. It does not break chords, but rather rotates them intact.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">x &lt;-<span class="st"> &quot;a b ceg&quot;</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">note_rotate</span>(x, <span class="dv">1</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span>
</span></code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">note_rotate</span>(x, <span class="dv">-1</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span>
</span></code></pre>
<p><code>note_shft</code> only operates on notes, not chords, but is a more complex function. It also rotates notes, but it maintains a consistent direction of increasing or decreasing pitch. The direction is determined by <code>n</code> being negative or positive.</p>
<p>This function is intended for use on strings of notes that are already ordered by increasing pitch. However, if applied to a sequence of unordered notes, the sequence will eventually become ordered if <code>n</code> is large enough, because each shift transposes the current lowest note by however many full octaves necessary to be above the current highest note and as close to it as possible.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">note_shift</span>(<span class="st">&quot;c e g&quot;</span>, <span class="dv">1</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">4</span><span>
</span></code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">note_shift</span>(<span class="st">&quot;c e g&quot;</span>, <span class="dv">-4</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">1</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">2</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">2</span><span>
</span></code></pre>
<p><code>note_arpeggiate</code> is like <code>note_shift</code> but it extends the original note sequence rather than shifting it and maintaining its fixed size. <code>n</code> refers to the number of additional notes to append to the sequence. The length of the final sequence is the length of the original sequence plus <code>n</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">note_arpeggiate</span>(<span class="st">&quot;c e g&quot;</span>, <span class="dv">5</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">4</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">5</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">5</span><span>
</span></code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">note_arpeggiate</span>(<span class="st">&quot;c e g&quot;</span>, <span class="dv">-5</span>)</a></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">1</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">1</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">2</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">2</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">2</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span>
</span></code></pre>
<p>The next section on music programming covers various helper functions related to chords.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
