<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Note functions</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Note functions</h1>



<div id="note-identity-checks" class="section level2">
<h2>Note identity checks</h2>
<p>There are a number of functions that assist with music programming
around note and pitch validation, comparison, equivalence checking, and
various manipulations and transformations. In a previous section, you
saw <code>is_note()</code> and <code>is_chord()</code>. Other identity
functions include:</p>
<ul>
<li><code>note_has_natural()</code></li>
<li><code>note_has_accidental()</code></li>
<li><code>note_has_flat()</code></li>
<li><code>note_has_sharp()</code></li>
<li><code>note_is_natural()</code></li>
<li><code>note_is_accidental()</code></li>
<li><code>note_is_flat()</code></li>
<li><code>note_is_sharp()</code></li>
<li><code>note_has_tick()</code></li>
<li><code>note_has_integer()</code></li>
<li><code>note_is_tick()</code></li>
<li><code>note_is_integer()</code></li>
<li><code>is_diatonic()</code></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;c e_ g b_&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">note_has_accidental</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">note_is_accidental</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE  TRUE
</code></pre>
<p>The function <code>is_diatonic()</code> takes a <code>key</code>
signature for context.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;c e_ g b_ cd#g&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">is_diatonic</span>(x, <span class="at">key =</span> <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE  TRUE FALSE FALSE
</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">is_diatonic</span>(x, <span class="at">key =</span> <span class="st">&quot;b_&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE
</code></pre>
</div>
<div id="noteworthy-string-metadata" class="section level2">
<h2>Noteworthy string metadata</h2>
<p>There are a number of functions that parse basic metadata about
noteworthy strings.</p>
<ul>
<li><code>n_steps()</code></li>
<li><code>n_notes()</code></li>
<li><code>n_chords()</code></li>
<li><code>n_octaves()</code></li>
<li><code>chord_size()</code></li>
<li><code>octave_type()</code></li>
<li><code>accidental_type()</code></li>
<li><code>time_format()</code></li>
<li><code>is_space_time()</code></li>
<li><code>is_vector_time()</code></li>
</ul>
<p>See <code>help(&quot;note-metadata&quot;)</code> for details. A few examples
are shown here.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;e_2 a_, c#f#a#&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">n_steps</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 3
</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">n_notes</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 2
</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">n_chords</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 1
</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">chord_size</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 1 1 3
</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">octave_type</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;tick&quot;
</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">time_format</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;space-delimited time&quot;
</code></pre>
</div>
<div id="noteworthy-string-summaries" class="section level2">
<h2>Noteworthy string summaries</h2>
<p>While there is not a clear delineation between the previous set of
functions and the next, it helps to break them up a bit since there are
many. These functions go bit further in summarizing the data in
noteworthy strings.</p>
<ul>
<li><code>tally_notes()</code></li>
<li><code>tally_pitches()</code></li>
<li><code>octaves()</code></li>
<li><code>tally_octaves()</code></li>
<li><code>distinct_notes()</code></li>
<li><code>distinct_pitches()</code></li>
<li><code>distinct_octaves()</code></li>
<li><code>pitch_range()</code></li>
<li><code>semitone_range()</code></li>
<li><code>semitone_span()</code></li>
<li><code>octave_range()</code></li>
<li><code>octave_span()</code></li>
</ul>
<p>See <code>help(&quot;note-summaries&quot;)</code> for details. Here are some
examples.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;e_2 a_, b_, c#f#a# c#&#39;f#&#39;a#&#39;&#39;&quot;</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">tally_notes</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;"># A tibble: 6 × 2</span>
#&gt;   note      n
#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
#&gt; <span style="color: #555555;">1</span> c#        2
#&gt; <span style="color: #555555;">2</span> e_        1
#&gt; <span style="color: #555555;">3</span> f#        2
#&gt; <span style="color: #555555;">4</span> a_        1
#&gt; <span style="color: #555555;">5</span> a#        2
#&gt; <span style="color: #555555;">6</span> b_        1
</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">tally_pitches</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;"># A tibble: 9 × 2</span>
#&gt;   pitch     n
#&gt;   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
#&gt; <span style="color: #555555;">1</span> e_2       1
#&gt; <span style="color: #555555;">2</span> a_,       1
#&gt; <span style="color: #555555;">3</span> b_,       1
#&gt; <span style="color: #555555;">4</span> c#        1
#&gt; <span style="color: #555555;">5</span> f#        1
#&gt; <span style="color: #555555;">6</span> a#        1
#&gt; <span style="color: #555555;">7</span> c#&#39;       1
#&gt; <span style="color: #555555;">8</span> f#&#39;       1
#&gt; <span style="color: #555555;">9</span> a#&#39;&#39;      1
</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">distinct_notes</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">d_</span> <span style="color: #00BBBB; font-weight: bold;">e_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span> <span style="color: #00BBBB; font-weight: bold;">a_</span> <span style="color: #00BBBB; font-weight: bold;">b_</span> <span style="color: #00BBBB; font-weight: bold;">b_</span>
</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">distinct_pitches</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">d_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span> <span style="color: #00BBBB; font-weight: bold;">b_</span> <span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">&#39;&#39;</span>
</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">pitch_range</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;e_,&quot;  &quot;b_&#39;&#39;&quot;
</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">semitone_range</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 39 82
</code></pre>
</div>
<div id="coercion-functions" class="section level2">
<h2>Coercion functions</h2>
<div id="accidentals" class="section level3">
<h3>Accidentals</h3>
<p>Note that it is common for functions to treat notes as different if
they sound the same but one is transcribed as a flat and the other as a
sharp. <code>tabr</code> makes the distinction for notation purposes;
same pitch, different notes. This also supports transcription. Functions
like <code>transpose()</code> of course handle pitch as pitch and
therefore the style of representation does not affect computation.</p>
<p>There are functions for enforcing a singular representation for
accidentals in noteworthy strings since it is unusual to mix flats and
sharps.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">flatten_sharp</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_g_b_</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">sharpen_flat</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">d#</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">g#</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c#f#a#</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>Do not be confused about the names of these functions. They are for
enforcing a single type of accidental. To actually lower sharps by a
half step or semitone as well as raise flats similarly, use
<code>naturalize()</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">naturalize</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">cfa</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>These are helpful building blocks for music programming. A useful
wrapper around <code>flatten_sharp()</code> and
<code>sharpen_flat()</code> is <code>note_set_key()</code>. Like
<code>is_diatonic()</code>, this function takes a <code>key</code>
argument. <code>key</code> was more meaningful for
<code>is_diatonic</code>. However, providing a key signature here is
helpful for the purpose of enforcing the correct representation of
accidentals intended by the user, which <code>tabr</code> cannot know
until informed.</p>
<p>Be aware that the default for functions that take a <code>key</code>
argument is <code>c</code>, but <code>c</code> and <code>am</code> have
no accidentals in their key signatures, so <code>note_set_key()</code>
will have no effect if you pass these values to <code>key</code>. It is
also important to recognize that it does not matter for this function
what key you choose specifically; it only matters that you choose a key
that has the type of accidentals in its signature that you wish to force
your noteworthy string to use. If you want flats, it makes no difference
if you set <code>key = &quot;f&quot;</code> or <code>key = &quot;b_&quot;</code>. For this
function, you can also literally enter <code>key = &quot;flat&quot;</code> or
<code>key = &quot;sharp&quot;</code>, options that stress the extent to which
<code>key</code> actually matters to <code>note_set_key()</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">note_set_key</span>(x, <span class="st">&quot;c&quot;</span>) <span class="co"># no change possible</span></span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_g_b_</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">note_set_key</span>(x, <span class="st">&quot;f&quot;</span>) <span class="co"># key of F has a flat</span></span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_g_b_</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">note_set_key</span>(x, <span class="st">&quot;g&quot;</span>) <span class="co"># key of G has a sharp</span></span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">d#</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">g#</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">,</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c#f#a#</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>The intent is not to force notes which may not be diatonic to the key
signature to fit that signature. All pitches remain exactly what they
are. It does not matter if they are not in the key. But they are forced
to conform to a key’s representation of accidentals.</p>
<p>For other functions in <code>tabr</code>, <code>key</code> arguments
utilize the specific key signature in a more complete manner, and the
options <code>flat</code> and <code>sharp</code> are not relevant or
allowed.</p>
</div>
<div id="octave-numbering" class="section level3">
<h3>Octave numbering</h3>
<p>Octave numbering can be ambiguous, including both tick and integer
numbering format. You can coerce a noteworthy string strictly to one of
the other:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;c, c c&#39; c2 c c4&quot;</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">as_integer_octaves</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">2</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">4</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">2</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">4</span>
</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">as_tick_octaves</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span>
</code></pre>
<p>In general, functions that operate on and return noteworthy strings
will perform coercion to an internally consistent format. If formatting
is ambiguous, the default is tick octave numbering and flats for
accidentals.</p>
</div>
<div id="timestep-format" class="section level3">
<h3>Timestep format</h3>
<p>Similarly, you can coerce the time format of a noteworthy string
between space-delimited time and vectorized time:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">as_space_time</span>(<span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;g&quot;</span>, <span class="st">&quot;ceg&quot;</span>)))</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e</span> <span style="color: #00BBBB; font-weight: bold;">g</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">as_vector_time</span>(<span class="st">&quot;c e g ceg&quot;</span>))</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>vectorized time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e</span> <span style="color: #00BBBB; font-weight: bold;">g</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">as.character</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;c e g ceg&quot;
</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">as.character</span>(y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;c&quot;   &quot;e&quot;   &quot;g&quot;   &quot;ceg&quot;
</code></pre>
</div>
</div>
<div id="comparative-equivalence" class="section level2">
<h2>Comparative equivalence</h2>
<p>The <code>note_is_*</code> functions mentioned earlier are
vectorized, but the operations they perform are self checks. Other
functions are available for comparative checks of identity or
equivalence between two notes. These functions are also vectorized. Each
note input can be an entire noteworthy string.</p>
<p>There are different dimensions along which the strictness of equality
varies and are worth taking a moment to break these and other properties
down clearly:</p>
<ul>
<li>These functions come in <code>*_is_equal</code> and
<code>*is_identical</code> pairs. Equality is more relaxed than
identity.</li>
<li>The <code>note_is_*</code> pairs below also offer the argument
<code>ignore_octave</code>. This further weakens the requirements for
passing both equality and identity comparisons of two notes.</li>
<li>These functions perform a noteworthy check, but do not require
anything stricter. This means these comparisons work on all notes, even
those belonging to chords.</li>
<li>The general distinction between notes being equal and notes being
identical is sound vs. transcription/written notation. If two notes
sound the same, e.g. <code>e_</code> and <code>d#</code>, they are
equal, but not identical.</li>
<li>There are additional nuances with octave comparisons using the
<code>octave_is_*</code> pairs.</li>
</ul>
<p>First look at note and pitch comparisons. The main difference is that
pitch is more complete than note in that the former implicitly carries
the octave position. Setting <code>ignore_octave = FALSE</code> for note
comparisons makes them equivalent to their pitch comparison
counterparts.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;b_2 ce_g&quot;</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;b_ cd#g&quot;</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="fu">note_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE TRUE
</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">note_is_identical</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE
</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="fu">pitch_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">pitch_is_identical</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE FALSE
</code></pre>
<p>There are minimal requirements for equivalence that precede the forms
and degrees of equivalence described and shown above. At a bare minimum,
two noteworthy strings must have the same number of time steps available
for pairwise comparison. Otherwise a simple <code>NA</code> is returned.
In the following example, the strings <code>x</code> and <code>y</code>
have the same number of notes, in the same order, but the first has
three times steps and the second has two.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;b_2 ce_g b_&quot;</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;b_2 ce_gb_&quot;</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="fu">note_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA
</code></pre>
<p>In the next example, <code>x</code> and <code>y</code> have the same
number of of the same notes, again in the same order, and even have an
equal number of timesteps. Having the same number of timesteps makes
pairwise comparisons possible. They return <code>FALSE</code> where
unequal.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;b_2 ce_g b_&quot;</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;b_2 ce_ gb_&quot;</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="fu">note_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  TRUE FALSE FALSE
</code></pre>
<p>Finally, there are octave comparisons, which must be defined and
behave somewhat differently. <code>octave_is_equal()</code> and
<code>octave_is_identical()</code> allow much weaker forms of
equivalence in that they ignore notes completely. These functions are
only concerned with comparing the octave numbers spanned by any pitches
present at each timestep.</p>
<p>When checking for equality, <code>octave_is_equal()</code> only looks
at the octave number associated with the first note at each step, e.g.,
only the root note of a chord. <code>octave_is_identical()</code>
compares all octaves spanned at a given timestep by considering all
notes when a chord is present.</p>
<p>This still leaves open the definitions of equivalence. To
clarify:</p>
<ul>
<li>It does not matter when comparing two chords that they may be
comprised of a different numbers of notes.</li>
<li>If the set of unique octaves spanned by one chord is identical to
the set spanned by the other, they are considered to have identical
octave coverage.</li>
</ul>
<p>Consider an example: <code>a1b2c3</code> is identical to
<code>d1e1f2g3</code>. The notes are irrelevant. The number of notes is
irrelevant. The fact that octave number one occurs a different number of
times in each chord is irrelevant. What matters is that they both have
the same set of unique octave positions <code>{1, 2, 3}</code>. To be
equal, even less is required. In this case it only matters that the two
chords begin with <code>x1</code>, where <code>x</code> is any note.</p>
<p>One alternative, for <code>octave_is_identical()</code> only, is to
set <code>single_octave = TRUE</code>. This increases the requirement
for identity to require that all notes from both chords being compared
at a given timestep share a single octave.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;a1 b_2 a1b2c3 a1b4 g1a1b1&quot;</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;a_2 g#2 d1e1f2g3 a1b2b4 d1e1&quot;</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="fu">octave_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">octave_is_identical</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">octave_is_identical</span>(x, y, <span class="at">single_octave =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;a,, b_, a,,b,c a,,b&#39; g,,a,,b,,&quot;</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;a_, g#, d,,e,,f,g a,,b,b&#39; d,,e,,&quot;</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="fu">octave_is_equal</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">octave_is_identical</span>(x, y)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE  TRUE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="fu">octave_is_identical</span>(x, y, <span class="at">single_octave =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] FALSE  TRUE FALSE FALSE  TRUE
</code></pre>
</div>
<div id="slice-sort-rotate-shift-arpeggiate" class="section level2">
<h2>Slice, sort, rotate, shift, arpeggiate</h2>
<p>A noteworthy string can be subset by index. This can with specific
integers or with a logical vector with the same length as the number of
time steps.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;a b ceg&quot;</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="fu">note_slice</span>(x, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="fu">note_slice</span>(x, <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>Vectorized time is more trivial but is of course handled the same way
and still applies the noteworthiness check and class assignment.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;ceg&quot;</span>)</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="fu">note_slice</span>(x, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>vectorized time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">note_slice</span>(x, <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>vectorized time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ceg</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>Sorting by pitch works with chords by sorting successively across
notes in a chord. For example, <code>a,</code> is sorted lower than
<code>a,ce</code>, which in turn is lower than <code>a,e</code>. Below
is an example where notes and chords are not sorted by pitch. The final
chord in the sequence also spans three octaves. There is also a
<code>ba</code>, which is itself not ordered, but this is accounted for
when sorting by successive pitches in chords.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;bd&#39;f#&#39; a c&#39;e&#39;g&#39; b ba c&#39;g&#39; gd&#39;g&#39;d&#39;&#39;&quot;</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="fu">note_sort</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">gd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ba</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">note_sort</span>(x, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ba</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">gd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p>Rotating or cycling a sequence of notes and chords in a noteworthy
string is done with <code>note_rotate()</code>. This is a simple
function. It only rotates the sequence left or right. It does not do any
transposition. It does not break chords, but rather rotates them
intact.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">note_rotate</span>(x, <span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ba</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">gd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">note_rotate</span>(x, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">gd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">ba</span><span style="color: #BBBB00;">&gt;</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p><code>note_shift()</code> also rotates notes, but does so up or down
in pitch like a moving window. It requires breaking any chords into
separate notes, ordering all notes by pitch, and then shifting the
sorted notes <code>n</code> times, negative or positive indicating the
direction.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">note_shift</span>(<span class="st">&quot;c e g&quot;</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">e</span> <span style="color: #00BBBB; font-weight: bold;">g</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span>
</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">note_shift</span>(<span class="st">&quot;c e g&quot;</span>, <span class="sc">-</span><span class="dv">4</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">g</span><span style="color: #00BBBB;">,,</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">e</span><span style="color: #00BBBB;">,</span>
</code></pre>
<p><code>note_arpeggiate()</code> is like <code>note_shift()</code> but
it repeats the entire sequence rather than shifting it a note at a time
and maintaining its fixed size. <code>n</code> refers to the number of
repeats and must be positive. <code>steps</code> refers to the semitone
offset.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="fu">note_arpeggiate</span>(<span class="st">&quot;c e_ g_ a&quot;</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span> <span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">&#39;&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">&#39;&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;&#39;&#39;</span>
</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">note_arpeggiate</span>(<span class="st">&quot;c e_ g_ a&quot;</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">3</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span> <span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">c</span> <span style="color: #00BBBB; font-weight: bold;">e_</span> <span style="color: #00BBBB; font-weight: bold;">e_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">g_</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">c</span>
</code></pre>
</div>
<div id="transpose" class="section level2">
<h2>Transpose</h2>
<p>An important function in <code>tabr</code> for manipulating music
notation is the <code>transpose()</code> function, which also has the
alias <code>tp()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>notes1 <span class="ot">&lt;-</span> <span class="st">&quot;c b, c d e e d c b, c c c&#39;&quot;</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>notes2 <span class="ot">&lt;-</span> <span class="st">&quot;c&#39; b c&#39; d&#39; e&#39; e&#39; d&#39; c&#39; b c&#39; c&#39; c&#39;&#39;&quot;</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="fu">transpose</span>(notes1, <span class="dv">12</span>, <span class="at">octaves =</span> <span class="st">&quot;integer&quot;</span>) <span class="sc">==</span> <span class="fu">as_noteworthy</span>(notes2)</span></code></pre></div>
<pre class="r-output"><code>#&gt;  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
</code></pre>
<p>Transposing down is done with negative integers.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="fu">transpose</span>(<span class="st">&quot;a_ b_&#39; c&#39;&quot;</span>, <span class="dv">0</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">a_</span> <span style="color: #00BBBB; font-weight: bold;">b_</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span>
</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a_ b_&#39; c&#39;&quot;</span>, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">g</span> <span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">b</span>
</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a_ b_&#39; c&#39;&quot;</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">a</span> <span style="color: #00BBBB; font-weight: bold;">b</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;</span>
</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a# b&#39; c#&#39;&quot;</span>, <span class="dv">11</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;&#39;</span>
</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a# b&#39; c#&#39;&quot;</span>, <span class="sc">-</span><span class="dv">12</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">a#</span><span style="color: #00BBBB;">,</span> <span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #00BBBB; font-weight: bold;">c#</span>
</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a# b&#39; c#&#39;&quot;</span>, <span class="dv">13</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span><span style="color: #00BBBB;">&#39;</span> <span style="color: #00BBBB; font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span>
</code></pre>
<p><code>transpose</code> also offers the arguments found in
<code>as_noteworthy()</code> for direct control over the format of the
transposed output. You can specify the key signature with
<code>key</code> as an optional override to <code>accidentals</code>. It
does not do anything more than enforce the desired format for
accidentals.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a3 b4 c5&quot;</span>, <span class="dv">2</span>, <span class="at">key =</span> <span class="st">&quot;f&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">5</span> <span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">5</span>
</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a3 b4 c5&quot;</span>, <span class="dv">2</span>, <span class="at">octaves =</span> <span class="st">&quot;tick&quot;</span>, <span class="at">key =</span> <span class="st">&quot;g&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #00BBBB; font-weight: bold;">c#</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span>
</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a b&#39; c&#39;&#39;&quot;</span>, <span class="dv">2</span>, <span class="at">accidentals =</span> <span class="st">&quot;flat&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span> <span style="color: #00BBBB; font-weight: bold;">d_</span><span style="color: #00BBBB;">&#39;&#39;</span> <span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;&#39;</span>
</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="fu">tp</span>(<span class="st">&quot;a, b c&#39;e&#39;g&#39;&quot;</span>, <span class="dv">2</span>, <span class="at">octaves =</span> <span class="st">&quot;integer&quot;</span>, <span class="at">accidentals =</span> <span class="st">&quot;sharp&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555; font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span>space-delimited time<span style="color: #555555; font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB; font-weight: bold;">b</span><span style="color: #00BBBB;">2</span> <span style="color: #00BBBB; font-weight: bold;">c#</span><span style="color: #00BBBB;">4</span> <span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB; font-weight: bold;">d</span><span style="color: #00BBBB;">4</span><span style="color: #00BBBB; font-weight: bold;">f#</span><span style="color: #00BBBB;">4</span><span style="color: #00BBBB; font-weight: bold;">a</span><span style="color: #00BBBB;">4</span><span style="color: #BBBB00;">&gt;</span>
</code></pre>
<p><code>transpose()</code> also works when chords are present. The next
section on music programming covers various functions related to
chords.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
