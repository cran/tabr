<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Musical scales</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Musical scales</h1>



<p>Programming with musical scales can be assisted by a collection of functions in <code>tabr</code> that check and manipulate musical scales, modes and key signatures.</p>
<div id="key-signatures" class="section level2">
<h2>Key signatures</h2>
<p>For key signatures, <code>keys</code> lists valid key signature abbreviation strings for each key as used in <code>tabr</code>. There are several <code>key_is*</code> functions that return a logical result regarding properties of keys:</p>
<ul>
<li>key_is_natural</li>
<li>key_is_sharp</li>
<li>key_is_flat</li>
<li>key_is_major</li>
<li>key_is_minor</li>
</ul>
<p>There are also the functions, <code>key_n_flats</code> and <code>key_n_sharps</code>, that give the number of respective accidentals in a key signature.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">keys</span>()</span></code></pre></div>
<pre class="r-output"><code>#&gt;  [1] &quot;c&quot;   &quot;g&quot;   &quot;d&quot;   &quot;a&quot;   &quot;e&quot;   &quot;b&quot;   &quot;f#&quot;  &quot;c#&quot;  &quot;f&quot;   &quot;b_&quot;  &quot;e_&quot;  &quot;a_&quot; 
#&gt; [13] &quot;d_&quot;  &quot;g_&quot;  &quot;c_&quot;  &quot;am&quot;  &quot;em&quot;  &quot;bm&quot;  &quot;f#m&quot; &quot;c#m&quot; &quot;g#m&quot; &quot;d#m&quot; &quot;a#m&quot; &quot;dm&quot; 
#&gt; [25] &quot;gm&quot;  &quot;cm&quot;  &quot;fm&quot;  &quot;b_m&quot; &quot;e_m&quot; &quot;a_m&quot;
</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">key_is_flat</span>(<span class="st">&quot;f&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE
</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">key_n_flats</span>(<span class="st">&quot;f&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 1
</code></pre>
<p>The previous section gave an overview of noteworthy strings. While some of the functions that help enforce proper notation in R seemed like they did not offer much utility in terms of direct use, it was clear that they were integral to the robustness of other <code>tabr</code> functions. Now, looking at these key signature helpers, it may be tempting to dismiss their utility even more quickly because a trained musician does not need to invoke them at the command line to know what result they will return.</p>
<p>These functions are not provided to answer basic questions in an interactive R session so much as they are for programming. These are some of the initial building blocks on top of which more complex functions are built, including many functions in <code>tabr</code>. As the collection of music programming helper functions in <code>tabr</code> grows, it becomes easy to do more with less.</p>
</div>
<div id="scales" class="section level2">
<h2>Scales</h2>
<p>Several predefined musical scales are provided and accessible by calling various <code>scale_*</code> functions.</p>
<ul>
<li>scale_chromatic</li>
<li>scale_diatonic</li>
<li>scale_minor</li>
<li>scale_major</li>
<li>scale_harmonic_minor</li>
<li>scale_hungarian_minor</li>
<li>scale_melodic_minor</li>
<li>scale_jazz_minor</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">scale_hungarian_minor</span>(<span class="dt">key =</span> <span class="st">&quot;am&quot;</span>, <span class="dt">collapse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">,</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d#</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">f</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g#</span><span>
</span></code></pre>
<p>You can specify whether the vector result should be returned as is, for convenient vectorized programming pipelines, or collapsed to a single string in keeping with the space-delimited time syntax format common throughout <code>tabr</code>. Many functions in <code>tabr</code> accept both formats as inputs and/or offer them as outputs.</p>
<p>You can also specify if octave numbering should be included or stripped. Octave numbering is included by default because this maintains pitch order when the scale does not start on <code>C</code>. Every note in a noteworthy string has an implicit octave-3 position if not explicitly stated. Octave numbering attempts to be somewhat balanced around <code>C3</code>. If the result is not what is desired, it can be shifted by 12 semitones with <code>transpose</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">scale_major</span>(<span class="st">&quot;f&quot;</span>, <span class="ot">TRUE</span>, <span class="dt">ignore_octave =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">f</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span>
</span></code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">scale_major</span>(<span class="st">&quot;f&quot;</span>, <span class="ot">TRUE</span>, <span class="dt">ignore_octave =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">f</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span>
</span></code></pre>
<p>See <code>help(&quot;scale-helpers&quot;)</code> for details. Depending on the scale, other arguments are available.</p>
</div>
<div id="modes" class="section level2">
<h2>Modes</h2>
<p>The seven modern modes are also available with <code>mode_*</code> functions or through <code>modern_mode</code> by passing the mode string name. Other functions include <code>is_mode</code> and <code>rotate_mode</code>.</p>
<ul>
<li>mode_ionian</li>
<li>mode_dorian</li>
<li>mode_phrygian</li>
<li>mode_lydian</li>
<li>mode_mixolydian</li>
<li>mode_aeolian</li>
<li>mode_locrian</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">modes</span>()</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;ionian&quot;     &quot;dorian&quot;     &quot;phrygian&quot;   &quot;lydian&quot;     &quot;mixolydian&quot;
#&gt; [6] &quot;aeolian&quot;    &quot;locrian&quot;
</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">mode_aeolian</span>(<span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>vectorized time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">c</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">f</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span>
</span></code></pre>
</div>
<div id="diatonic-scale-chords" class="section level2">
<h2>Diatonic scale chords</h2>
<p>The <code>scale_chords</code> function provides a list of diatonic scale chords based on the root note and scale chosen. It returns triads by default and can also return seventh chords.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">scale_chords</span>(<span class="st">&quot;b_&quot;</span>, <span class="st">&quot;major&quot;</span>, <span class="st">&quot;seventh&quot;</span>, <span class="dt">collapse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">b_</span><span style="color: #00BBBB;">,</span><span style="color: #00BBBB;font-weight: bold;">dfa</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ce_gb_</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">dfac</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">e_gb_d</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">fac</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">gb_d</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">f</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ac</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">e_</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">g</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">scale_chords</span>(<span class="st">&quot;f#&quot;</span>, <span class="st">&quot;minor&quot;</span>, <span class="st">&quot;triad&quot;</span>, <span class="dt">collapse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>space-delimited time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">f#ac#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">g#bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">ac#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">bd</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">c#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">g#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">d</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">f#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">a</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span> </span><span style="color: #BBBB00;">&lt;</span><span style="color: #00BBBB;font-weight: bold;">e</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">g#</span><span style="color: #00BBBB;">&#39;</span><span style="color: #00BBBB;font-weight: bold;">b</span><span style="color: #00BBBB;">&#39;</span><span style="color: #BBBB00;">&gt;</span><span>
</span></code></pre>
</div>
<div id="scale-degrees" class="section level2">
<h2>Scale degrees</h2>
<p>The functions <code>scale_note</code> and <code>scale_degree</code> map between notes and degree in a given scale. For chords in a noteworthy string, only the root note is considered. For <code>scale_degree</code>, if a note is not diatonic to the scale, <code>NA</code> is returned. <code>NA</code> is also used when rests occur. Octaves are ignored. For <code>scale_note</code>, degrees outside the range of the scale are recycled. See below. To see if chords are fully diatonic, use <code>is_diatonic</code> or the more general <code>is_in_scale</code>. <code>chord_degree</code> will return a list comparable to <code>scale_degree</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>x &lt;-<span class="st"> &quot;c e gb&#39;d&#39;&quot;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="kw">scale_degree</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 1 3 2
</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">scale_degree</span>(x, <span class="dt">key =</span> <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA  5  4
</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">scale_degree</span>(x, <span class="dt">key =</span> <span class="st">&quot;am&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 3 5 4
</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">scale_degree</span>(x, <span class="dt">scale =</span> <span class="st">&quot;chromatic&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 1 5 3
</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">scale_note</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>vectorized time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">d</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">f#</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b</span><span> </span><span style="color: #00BBBB;font-weight: bold;">c#</span><span>
</span></code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">scale_note</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>), <span class="st">&quot;dm&quot;</span>, <span class="st">&quot;harmonic minor&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;font-weight: bold;">&lt;Noteworthy string&gt;
#&gt;   Format: </span><span>vectorized time</span><span style="color: #555555;font-weight: bold;">
#&gt;   Values: </span><span style="color: #00BBBB;font-weight: bold;">d</span><span> </span><span style="color: #00BBBB;font-weight: bold;">e</span><span> </span><span style="color: #00BBBB;font-weight: bold;">f</span><span> </span><span style="color: #00BBBB;font-weight: bold;">g</span><span> </span><span style="color: #00BBBB;font-weight: bold;">a</span><span> </span><span style="color: #00BBBB;font-weight: bold;">b_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d_</span><span> </span><span style="color: #00BBBB;font-weight: bold;">d</span><span>
</span></code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw">note_in_scale</span>(<span class="st">&quot;a_ g#&quot;</span>, <span class="st">&quot;a_&quot;</span>, <span class="dt">strict_accidentals =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] TRUE TRUE
</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a></span>
<span id="cb18-2"><a href="#cb18-2"></a>x &lt;-<span class="st"> &quot;r d dfa df#a f#ac#&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="kw">chord_degree</span>(x, <span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [[1]]
#&gt; [1] NA
#&gt; 
#&gt; [[2]]
#&gt; [1] 1
#&gt; 
#&gt; [[3]]
#&gt; [1]  1 NA  5
#&gt; 
#&gt; [[4]]
#&gt; [1] 1 3 5
#&gt; 
#&gt; [[5]]
#&gt; [1] 3 5 7
</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">is_in_scale</span>(x, <span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]    NA  TRUE FALSE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">is_diatonic</span>(x, <span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]    NA  TRUE FALSE  TRUE  TRUE
</code></pre>
<p>Other functions in <code>tabr</code> also work with scales and some build upon functions introduced here.</p>
</div>
<div id="musical-intervals" class="section level2">
<h2>Musical intervals</h2>
<p>Musical intervals can be referenced by a name or a numeric value defining the separation of two notes. <code>interval_semitones</code> returns a positive integer describing the number of semitones spanned by a common interval. It takes a name or abbreviation of a common interval as input. Essentially, any entry from any other column in the <code>mainIntervals</code> dataset can be used to obtain the interval in semitones. It’s a simple filter and match, but it is convenient to map between different representations of the same property in <code>tabr</code> without typing the extra bit of code to do so each time.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>mainIntervals</span></code></pre></div>
<pre class="r-output"><code>#&gt; <span style="color: #555555;"># A tibble: 26 x 5</span><span>
#&gt;    semitones mmp            mmp_abb ad                                ad_abb
#&gt;        </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                             </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span> 
#&gt; </span><span style="color: #555555;"> 1</span><span>         0 perfect unison P1      diminished second                 d2    
#&gt; </span><span style="color: #555555;"> 2</span><span>         1 minor second   m2      augmented unison                  A1    
#&gt; </span><span style="color: #555555;"> 3</span><span>         2 major second   M2      diminished third                  d3    
#&gt; </span><span style="color: #555555;"> 4</span><span>         3 minor third    m3      augmented second                  A2    
#&gt; </span><span style="color: #555555;"> 5</span><span>         4 major third    M3      diminished fourth                 d4    
#&gt; </span><span style="color: #555555;"> 6</span><span>         5 perfect fourth P4      augmented third                   A3    
#&gt; </span><span style="color: #555555;"> 7</span><span>         6 tritone        TT      diminished fifth/augmented fourth d5/A4 
#&gt; </span><span style="color: #555555;"> 8</span><span>         7 perfect fifth  P5      diminished sixth                  d6    
#&gt; </span><span style="color: #555555;"> 9</span><span>         8 minor sixth    m6      augmented fifth                   A5    
#&gt; </span><span style="color: #555555;">10</span><span>         9 major sixth    M6      diminished seventh                d7    
#&gt; </span><span style="color: #555555;"># ... with 16 more rows</span><span>
</span></code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="kw">interval_semitones</span>(<span class="kw">c</span>(<span class="st">&quot;m3&quot;</span>, <span class="st">&quot;M7&quot;</span>))</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  3 11
</code></pre>
<p>Likely more useful for programming, the function <code>pitch_interval</code> provides the number of semitones between two input notes. This function does not relate to specific scales, but is worth mentioning on the topic of interval helpers. It provides both magnitude and direction. The result is negative if the first note is of higher pitch than the second. It is vectorized and both inputs must have the same number of timesteps.</p>
<p>Chords can be reduced to their root note (lowest pitch) for comparison or forced to yield an <code>NA</code> interval with respect to its two adjacent timesteps (e.g., <code>c</code> to <code>ceg</code> is <code>NA</code> and so is <code>ceg</code> to <code>c</code>). Rests <code>r</code> and silent rests <code>s</code> also yield an <code>NA</code> for the interval from a prior note.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">pitch_interval</span>(<span class="st">&quot;a2&quot;</span>, <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 3
</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">pitch_interval</span>(<span class="st">&quot;c d e&quot;</span>, <span class="st">&quot;c c c&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1]  0 -2 -4
</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">pitch_interval</span>(<span class="st">&quot;r c ceg c e g s&quot;</span>, <span class="st">&quot;a c d d f# a e&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA  0  2  2  2  2 NA
</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">pitch_interval</span>(<span class="st">&quot;r c ceg c e g s&quot;</span>, <span class="st">&quot;a c d d f# a e&quot;</span>, <span class="dt">use_root =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA  0 NA  2  2  2 NA
</code></pre>
<p>Next is <code>scale_interval</code>. This function is similar to <code>pitch_interval</code> in that it takes two noteworthy strings, which together define an intervals element-wise. It is almost an inverse of <code>interval_semitones</code> except that you provide notes rather than the semitone distance of their intervals. The function returns a main interval name or abbreviation from <code>mainIntervals</code>, depending on <code>format</code>. The results are name-only. They are not signed. Use <code>pitch_interval</code> to obtain direction.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">scale_interval</span>(<span class="st">&quot;c c c c&quot;</span>, <span class="st">&quot;c, e g b&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;P8&quot; &quot;M3&quot; &quot;P5&quot; &quot;M7&quot;
</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">scale_interval</span>(<span class="st">&quot;a2&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;mmp&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] &quot;minor third&quot;
</code></pre>
<p>There are also lagged difference versions of these functions. You can adjust the lag with <code>n</code>. You can also retain (convenient for data frames) or trim the <code>n</code> leading <code>NA</code>s. This does not trim meaningful <code>NA</code>s like those resulting from rests.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">pitch_diff</span>(<span class="st">&quot;c d e f g a b&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA  2  2  1  2  2  2
</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">pitch_diff</span>(<span class="st">&quot;c d e f g a b&quot;</span>, <span class="dt">trim =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] 2 2 1 2 2 2
</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">scale_diff</span>(<span class="st">&quot;c d e f g a b&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA   &quot;M2&quot; &quot;M2&quot; &quot;m2&quot; &quot;M2&quot; &quot;M2&quot; &quot;M2&quot;
</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">scale_diff</span>(<span class="st">&quot;c d e f g a b&quot;</span>, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA   NA   &quot;M3&quot; &quot;m3&quot; &quot;m3&quot; &quot;M3&quot; &quot;M3&quot;
</code></pre>
<p>Lagged intervals respect rest timesteps. All timestep positions including rests are retained, but the lag-<code>n</code> difference computation ignores them.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>x &lt;-<span class="st"> &quot;a, c r r r r g&quot;</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="kw">pitch_diff</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA  3 NA NA NA NA  7
</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="kw">scale_diff</span>(x)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA   &quot;m3&quot; NA   NA   NA   NA   &quot;P5&quot;
</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">pitch_diff</span>(x, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA NA NA NA NA NA 10
</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">scale_diff</span>(x, <span class="dt">n =</span> <span class="dv">2</span>, <span class="dt">trim =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>#&gt; [1] NA   NA   NA   NA   &quot;m7&quot;
</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
